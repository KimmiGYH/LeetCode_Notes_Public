# 1818_Minimum Absolute Sum Difference_绝对差值和

## 解法一：二分 $O(n \log n)$

- 在进行处理之前，先对 $nums1$ 进行拷贝并排序，得到 $rec$ 数组。
- 计算 $nums1$ 和 $nums2$ 绝对差值的和，记为 $sum$；$diff$ 为 $abs(nums2[i] - nums1[i])$ 的值
- 通过对 $rec$ 进行二分查找，找到最合适替换 $nums2[i]$ 的值
  - 二分查找时，要考虑 $nums2[i]$ 夹在 $rec$ 数组里的哪两个数之间，算出靠右的 $r$，还要考虑前一个位置上 $r-1$ 上的数
- 答案要求最小值，就用 $sum$ 减去一个最大值，这个最大值为 $diff$ 与二分完之后的差值（即橙色数值）所相差的值。要算两次算：
  - $diff - abs(rec[r] - y)$，这里要加 $abs()$ 在于如果 $rec$ 数组里的数较小，那么 $rec[r] - y$ 会得到负值
    ```
    [5,2,7]
    [10,7,12]
    ```
  - $diff - (y - rec[r-1])$
  - 然后取这两个数的较大值 $mx$
- 最后 $sum$ 减去上面的数 $mx$，即为答案。注意要取模。
  - $sum = sum + diff$ 时，要取模
  - 答案中 $sum - mx$ 可能为负数，要加上 $MOD$

**复杂度分析**

- 时间复杂度：$O(n \log n)$
  - 其中 $n$ 是数组 $nums1$和 $nums2$ 的长度。
  - 我们需要记录 $nums1$ 中的元素，并进行排序，时间复杂度是 $O(n \log n)$。
  - 计算 $mx$ 需要进行 $n$ 次二分查找，每次二分查找的时间为 $O(\log n)$，因此时间复杂度也是 $O(n \log n)$。
  - 所以总的时间复杂度为 $O(n \log n)$。

- 空间复杂度：$O(n)$，其中 $n$ 是数组 $nums1$ 和 $nums2$ 的长度。我们需要创建大小为 $n$ 的辅助数组。

## 写法二：二分用 `lower_bound`

注意，手写二分的过程中，应将边界改为 $r = n;$

虽然 $while(l < r)$ 的模板里 $r = n - 1$，但是...

这里边界需要将 $r = n-1;$ 改成 $r = n;$。
因为如示例所示的情况 $nums1$ 的最后一个位置也可以插入，比如 $[2, 5, 7] 10$，虽然找不到 $\ge 10$ 的数，但是可以往前找到 $< 10$ 的最近的一个数。

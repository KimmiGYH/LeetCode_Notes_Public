# 1131_Maximum of Absolute Value Expression_绝对值表达式的最大值



## 解法一：曼哈顿距离（此解法行不通了）

我们将 `arr1` 中的所有值看做平面上点的横坐标，将 `arr2` 中的所有值看做平面上点的纵坐标，那么表达式 `|arr1[i] - arr1[j]| + |arr2[i] - arr2[j]| + |i - j|`，**前两项**就可以看成是平面上两点的**曼哈顿距离**，整个式子就是要求两个点的曼哈顿距离与两个点索引差的和。

由于有取绝对值的操作存在，那么可能产生的计算有 `4` 种，分别为：右上减左下，右下减左上，左上减右下，左下减右上。

以测试样例为例，第一组样例如左图，右上减左下取得最大值为 $3 + 7 + 3 = 13$；
第二组样例如右图，右下减左上取得最大值为 $15 + 3 + 2 = 20$。

所以我们枚举 `4` 种情况，分别求出每种情况中的最大值和最小值，然后做差更新答案即可。

## 解法二：数学

对含有绝对值的式子求最大值，乍一看式子中含有两个下标 $i$ 和 $j$，好像需要来个双重 $for$ 循环，但是一看题设条件，数组长度最大到 $40000$，那显然双重 $for$ 循环的 $brute force$ 解法就行不通了，因此我们要换一个思路。

首先按照这么多年做数学题的经验来说，看到带有绝对值的式子，马上想到要消除绝对值。对于本题的式子，其中包含三个绝对值，每个绝对值能开出正反两种结果，因此带有三个绝对值的式子去掉绝对值后有 $8$ 种可能性。

只有这 $8$ 种可能：

![pic](https://tva1.sinaimg.cn/large/007S8ZIlly1ghlu1c4km1j30tg0viq7v.jpg)

由于 $i$ 和 $j$ 之前没有大小关系，也就说二者可以相互替代。因此：

- 1 等价于 8
- 2 等价于 7
- 3 等价于 6
- 4 等价于 5

也就是说我们只需要计算 $1，2，3，4$ 种情况的最大值就可以了。（当然你可以选择其他组合，只要完备就行）

为了方便，我们将 $i$ 和 $j$ 都提取到一起：

![pic2](https://tva1.sinaimg.cn/large/007S8ZIlly1ghlu1j6ueoj30qs0g6di2.jpg)

容易看出等式的最大值就是前面的最大值，和后面最小值的差值。如图：

![pic3](https://tva1.sinaimg.cn/large/007S8ZIlly1ghlu1oczs3j30r20kctb5.jpg)

再仔细观察，会发现前面部分和后面部分是一样的，原因还是上面所说的 $i$ 和 $j$ 可以互换。因此我们要做的就是：

- 遍历一遍数组，然后计算四个表达式的最大值和最小值。

  - $arr1[i] + arr2[i] + i$
  - $-arr1[i] + arr2[i] + i$
  - $arr1[i] - arr2[i] + i$
  - $arr1[i] + arr2[i] - i$

- 然后分别取出四个表达式最大值和最小值的差值（就是这个表达式的最大值）
- 四个表达式最大值再取出最大值

## 写法二：用正负符号标记

参考 LeetCode Lee215 大神：
[[Java/C++/Python] Maximum Manhattan Distance](https://leetcode.com/problems/maximum-of-absolute-value-expression/discuss/339968/JavaC%2B%2BPython-Maximum-Manhattan-Distance)

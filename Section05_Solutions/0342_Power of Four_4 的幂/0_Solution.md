# 342_Power of Four_4 的幂

### 方法一：(位运算) $O(1)$

首先，考虑一个数字是不是 $2$ 的整数次方，可以这样：

- 判断 `n & (n - 1) == 0`，若成立，则表示 $n$ 只有最高的二进制位是 $1$，后续的二进制位都是 $0$，符合 2 的幂次。考虑一个数字是不是 $2$ 的整数次方：如果一个数字 $n$ 是 $2$ 的整数次方，那么它的二进制一定是 `0...010...0` 这样的形式；考虑到 $n - 1$ 的二进制是 `0...001...1`，这两个数求按位与的结果一定是 $0$。因此如果 `n & (n - 1) == 0`，那么这个数是 $2$ 的次方。

在此基础上，判断这个数是否也是 $4$ 的次方：

- 如果这个数也是 $4$ 的次方，那二进制表示中 $1$ 的位置必须为奇数位。我们可以把 $n$ 和二进制的 32 位的 `01010101010101010101010101010101`（即十进制下的 `1431655765`）做按位与，如果结果不为 $0$，那么说明这个数是 $4$ 的次方。

**时间复杂度**

- 位运算时间复杂度为 $O(1)$。

**空间复杂度**

- 仅需要常数的额外空间。



### 方法二：(数论) $O(1)$

三个条件：

- 1) num > 0
- 2) num 是平方数
- 3) num 只包含因子 2

这道题目类似于LeetCode 326. Power of Three。

$n$ 是 $4$ 的整次幂，等价于 $n$ 是平方数，且 $n$ 的质因子只有 $2$。

`int` 范围内，$2$ 的最大的整数次幂 $2^{30}$，所以 $n$ 的质因子只有 $2$，等价于 $n$ 能整除 $2^{30}$。



时间复杂度分析：只有常数次计算，所以时间复杂度是 $O(1)$。


# 547. Number of Provinces_省份数量_朋友圈 (Medium)



**(并查集) $O(n^2)$**

1. 此题为并查集的入门题。

2. 基础的并查集能解决的一类问题是不断将两个元素所在集合合并，并随时询问两个元素是否在同一集合。

3. 定义数组 `p(i)` 表示 `i` 元素所在集合的根结点（代表元素）。初始时，所有元素所在集合的根结点就是自身。

4. **合并**时，直接将两个集合的根结点合并，即修改 `p` 数组。

5. **查询**时，不断通过判断 `i` 是否等于 `p(i)` 的操作，若不相等则递归判断 `p(p(i))`，直到 `i == p(i)` 为止。

6. 但以上做法会在一条链的情况下单次查询的时间复杂度退化至线性，故可以采用**路径压缩**优化，将复杂度降到近似常数。读者可以自行查阅相关资料。

7. 对于此题，最后只需检查有多少个元素为一个集合的根结点即可。

   

**时间复杂度**

并查集单次操作的复杂度**近似于常数**，故总时间复杂度为遍历整个朋友关系数组的复杂度，即 $O(n^2)$


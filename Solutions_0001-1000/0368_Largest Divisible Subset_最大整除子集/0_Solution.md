# 368. Largest Divisible Subset_最大整除子集 (Medium)

**(数学+DP)  $O(n^2)$** ($LIS$ 最长上升子序列问题的变体)

1. 我们可以先对 $nums$ 进行排序，于是 $subset$ 就是有序的

2. 题目中个的整除要求，说明 $a_1$ 能整除 $a_2$，$a_2$ 能整除 $a_3$，以此类推。$a_i$ 能整除 $a_{i+1}$，$a_{i+1}$ 能整除 $a_{i+2}$，……，$a_{j-1}$ 能整除 $a_{j}$。由于传递性，可得 $a_{i}$ 能整除 $a_{j}$。即 $n \ \% \ max \ of \ subset == 0$。

3. 动态规划的**状态表示**和**状态计算**：

   - 状态表示 $f(i)$：
     - 集合：以 $a[i]$ 为结尾的长度最长的满足要求的子序列；
     - 属性：Max

   - 转移方程： 枚举倒数第二个数 $a_j$，$a_{i}$ 能整除 $a_{j}$。
     - $f[i] = max \{f[i], f[j] + 1 \}$，其中 $nums[i] \% nums[j] == 0$，并且 $(0 ≤ j < i)$。

4. $DP$ 问题求方案倒推：
   1. 记录哪个 $f(i)$ 取得最大值，比如如果 $f(k)$ 取得最大值，我们必然选 $a_k$；
   2. 然后再看 $f(k)$ 是用哪个值更新出来的？比如 $f(k)$ 是由 $f(t)$ 更新出来的，那意味着倒数第二个元素是 $a_t$；
   3. 然后再看 $f(t)$ 是用哪个值更新出来的？比如 $f(t)$ 是由 $f(u)$ 更新出来的，那意味着 $a_t$ 前面的元素是 $a_u$；
